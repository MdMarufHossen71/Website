const area=document.getElementById('area'),startBtn=document.getElementById('start'),bestEl=document.getElementById('best'),lastEl=document.getElementById('last');let timeout,startAt,armed=false,best=+localStorage.getItem('rtBest')||0;if(best)bestEl.textContent=best;
startBtn.onclick=()=>{clearTimeout(timeout);armed=false;area.style.background='#f59e0b';area.textContent='Wait for green...';const d=1000+Math.random()*4000;timeout=setTimeout(()=>{armed=true;startAt=performance.now();area.style.background='#22c55e';area.textContent='TAP NOW!';},d)};
area.onclick=()=>{if(!startAt&&!armed)return;if(!armed){area.style.background='#ef4444';area.textContent='Too early!';return;}const ms=Math.round(performance.now()-startAt);lastEl.textContent=ms;if(!best||ms<best){best=ms;localStorage.setItem('rtBest',best);bestEl.textContent=best;}area.style.background='#334155';area.textContent='Great! Press Start again.';armed=false;startAt=0;};