const level=document.getElementById('level'), grid=document.getElementById('grid'), time=document.getElementById('time'), newBtn=document.getElementById('new');
const icons='ðŸŽðŸ“ðŸ‡ðŸ’ðŸ¥ðŸ‹ðŸ‰ðŸðŸ¥¥ðŸ¥•ðŸ”ðŸ•ðŸ©ðŸªðŸ°ðŸŽ®âš½ðŸš€'.split('');let first=null,lock=false,moves=0,timer=0,tick,matched=0;
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
function setup(){clearInterval(tick);timer=0;moves=0;matched=0;time.textContent=0;movesEl.textContent=0;const pairs=+level.value;const deck=shuffle([...icons.slice(0,pairs),...icons.slice(0,pairs)]);const cols=Math.sqrt(pairs*2)>=6?6:4;grid.style.gridTemplateColumns=`repeat(${cols},1fr)`;grid.innerHTML='';deck.forEach(v=>{const b=document.createElement('button');b.className='card';b.dataset.v=v;b.textContent=v;b.onclick=()=>flip(b);grid.appendChild(b);});tick=setInterval(()=>time.textContent=++timer,1000);}const movesEl=document.getElementById('moves');
function flip(b){if(lock||b.classList.contains('show')||b.classList.contains('done'))return;b.classList.add('show');if(!first){first=b;return;}moves++;movesEl.textContent=moves;if(first.dataset.v===b.dataset.v){first.classList.add('done');b.classList.add('done');first=null;matched++;if(matched===+level.value)clearInterval(tick);}else{lock=true;setTimeout(()=>{first.classList.remove('show');b.classList.remove('show');first=null;lock=false;},550);}}
newBtn.onclick=setup;setup();